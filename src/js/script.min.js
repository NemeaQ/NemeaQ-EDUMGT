let bootstrap=require("bootstrap"),parse=require("chart.js"),exampleSocket=new WebSocket("ws://edumgt.hanriel.ru:7777"),socketOutput=document.getElementById("socketOutput"),cardDate=document.getElementById("cardDate"),cardEnable=document.getElementById("cardEnable"),today=new Date;function sendStart(){exampleSocket.send("start "+cardDate.value+" "+cardEnable.checked)}cardDate.value=today.getFullYear()+"-"+(today.getMonth()+1)+"-"+today.getDate(),exampleSocket.onopen=function(t){exampleSocket.send("checkSession")},exampleSocket.onmessage=function(t){socketOutput.innerHTML+=t.data};const ctx=document.getElementById("myChart").getContext("2d"),myChart=new Chart(ctx,{type:"line",data:{labels:["4 дек","6 дек","7 дек","8 дек","9 дек","10 дек","11 дек","13 дек","14 дек"],datasets:[{label:"Посещаемость",data:[113,775,789,821,836,822,95,893,946],borderColor:"rgb(54, 162, 235)",tension:.4}]},options:{scales:{y:{max:1071}}}}),form=document.querySelector("form"),notificator=document.querySelector(".notify");function notify(t,e="notice"){t&&(notificator.innerHTML=t,notificator.setAttribute("data-notification-status",e),notificator.classList.add("do-show"),setTimeout(function(){notificator.classList.remove("do-show")},4e3))}form&&form.addEventListener("submit",()=>{if("no_ajax"!==form.id){event.preventDefault();let t=new XMLHttpRequest;t.open(form.method,form.action,!0),t.onload=function(){var t;200<=this.status&&this.status<400?(t=JSON.parse(this.response)).url?window.location.href="/"+t.url:t.reload?window.location.reload():notify(t.message,t.status):notify("Ошибка при подключении к серверу, повторите попыку позднее","error")},t.onerror=t=>notify(t.returnValue,"error"),t.send(new FormData(form))}}),window.notify=notify;